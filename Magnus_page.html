<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Magnus Individual Task &mdash; Collaborative Coding Exam 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=92fd9be5" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=fc837d61"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Jan Individual Task" href="Jan_page.html" />
    <link rel="prev" title="About this code" href="about.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Collaborative Coding Exam
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About this code</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Magnus Individual Task</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#task-overview">Task overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#network-implementation-in-depth">Network Implementation In-Depth</a></li>
<li class="toctree-l2"><a class="reference internal" href="#svhn-dataset-in-depth">SVHN Dataset In-Depth</a></li>
<li class="toctree-l2"><a class="reference internal" href="#entropy-metric-in-depth">Entropy Metric In-Depth</a></li>
<li class="toctree-l2"><a class="reference internal" href="#more-on-implementation-choices">More on implementation choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#challenges">Challenges</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-someone-elses-code">Running someone elses code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#someone-running-my-code">Someone running my code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tools">Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Jan_page.html">Jan Individual Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="christian.html">Christian’s task</a></li>
<li class="toctree-l1"><a class="reference internal" href="Johan_page.html">Individual task for Johan</a></li>
<li class="toctree-l1"><a class="reference internal" href="Solveig.html">Solveig Individual Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Collaborative Coding Exam</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Magnus Individual Task</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Magnus_page.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="magnus-individual-task">
<h1>Magnus Individual Task<a class="headerlink" href="#magnus-individual-task" title="Link to this heading"></a></h1>
<section id="task-overview">
<h2>Task overview<a class="headerlink" href="#task-overview" title="Link to this heading"></a></h2>
<p>In addition to the overall task, I was tasked to implement a three layer linear network, a dataset loader for the SVHN dataset, and a entropy metric. This document details that work.</p>
</section>
<section id="network-implementation-in-depth">
<h2>Network Implementation In-Depth<a class="headerlink" href="#network-implementation-in-depth" title="Link to this heading"></a></h2>
<p>For the network part I was tasked with making a three-layer linear network where each layer conists of 133 neurons. This is a fairly straightforward implementation where we make a custom class which inherits from the PyTorch Module class. This allows the class to be as simple as two methods; The <strong>init</strong> method and a <strong>forward</strong> method. Inheriting from the module class allows us to call an instance of the class like a function, and the <strong>forward</strong> method will be called.</p>
<p>The network is initialized with the following metrics:</p>
<ul class="simple">
<li><p>image_shape</p></li>
<li><p>num_classes</p></li>
<li><p>nr_channels</p></li>
</ul>
<p>The num_classes argument is used to define the number of output neurons. Each dataset has somewhere between 5 and 10 classes, and as such there isn’t a single output size works well.</p>
<p>As each layer is a linear layer we need to initialize the network with respect to the image size. We are working with datasets which are either greyscale or color images, and can be any height and width. Therefore we have the image_shape argument, which provides the information on the image height and width, and the nr_channels argument which states the number of channels we use. With these values we initialize the first layer accordingly, that is: height * width * channels inputsize.</p>
<p>The forward method in this class has an assertion making sure the input has four channels, they being batch size, channels, height and width.
Each input is flattened over the channel, height and width channels. Then they are passed through each layer and the resulting logits are returned.</p>
</section>
<section id="svhn-dataset-in-depth">
<h2>SVHN Dataset In-Depth<a class="headerlink" href="#svhn-dataset-in-depth" title="Link to this heading"></a></h2>
<p>The dataloader I was tasked with making is to load the well-known SVHN dataset. This is a RGB dataset with real-life digits taken from house numbers. The class tasked with loading the data inherits from the torch Dataset class, and has four methods:</p>
<ul class="simple">
<li><p><strong>init</strong> : initialized the instance of the class</p></li>
<li><p><strong>create_h5py</strong>: Creates the h5 object containing data from the downloaded .mat files for ease of use</p></li>
<li><p><strong>len</strong> : Method needed in use of the DataLoader class. Returns length of the dataset</p></li>
<li><p><strong>getitem</strong> : Method needed in use of the DataLoader class. Loads a image - label pair, applies any defined image transformations, and returns both image and label.</p></li>
</ul>
<p>The <strong>init</strong> method takes in a few arguments.</p>
<ul class="simple">
<li><p>data_path (Path): Path where either the data is downloaded or where it is to be downloaded to.</p></li>
<li><p>train (bool): Which set to use. If true we use the training set of SVHN, and if false we use the test set of SVHN.</p></li>
<li><p>transform: The transform functions to be applied to the returned image.</p></li>
<li><p>nr_channels: How many channels to use. Can be either 1 or 3, corresponding to either greyscale or RGB images respectively.</p></li>
</ul>
<p>In the init we check for the existence of the SVHN dataset. If it does not exist, then we run the _create_h5py method which will be explained later. Then the labels are loaded into memory as they are needed for the <strong>len</strong> method among other things.</p>
<p>The <strong>create_h5py</strong> method downloads a given SVHN set (train or test). We also change the label 10 to 0, as the SVHN dataset starts at index 1, with 10 representing images with the digit zero. After the download, we create two .h5 files. One with the labels and one with the images.</p>
<p>Lastly, in <strong>getitem</strong> we take index (number between 0 and length of label array). We retrive load the image h5 file, and retrive the row corresponding to the index.
We then convert the image to an Pillow Image object, then apply the defined transforms before returning the image and label.</p>
</section>
<section id="entropy-metric-in-depth">
<h2>Entropy Metric In-Depth<a class="headerlink" href="#entropy-metric-in-depth" title="Link to this heading"></a></h2>
<p>The EntropyPrediction class’ main job is to take some inputs from the MetricWrapper class and store the batchwise Shannon Entropy metric of those inputs. The class has four methods with the following jobs:</p>
<ul class="simple">
<li><p><strong>init</strong> : Initialize the class.</p></li>
<li><p><strong>call</strong> : Main method which is used to calculate and store the batchwise shannon entropy.</p></li>
<li><p><strong>returnmetric</strong> : Returns the collected metric.</p></li>
<li><p><strong>reset</strong> : Removes all the stored values up until that point. Readies the instance for storing values from a new epoch.</p></li>
</ul>
<p>The <strong>init</strong> method has two arguments, both present for compatability issues. However, the num_classes argument is used as a check in the <strong>call</strong> method to assert the input is of correctly assumed size.</p>
<p>In <strong>call</strong> we get both true labels and model logit scores for each sample in the batch as input. We’re calculating Shannon Entropy, not KL-divergence, so the true labels aren’t actually needed.
With permission from Kristoffer I’ve used the scipy implementation to calculate entropy here. We apply a softmax over the logit values, then calculate the Shannon Entropy, and make sure to remove any Inf values which might arise from a perfect guess/distribution.</p>
<p>Next we have the <strong>returnmetric</strong> method which is used to retrive the stored metric. This returns the mean over all stored values. Effectively, this will return the average Shannon Entropy of the dataset.</p>
<p>Lastly we have the <strong>reset</strong> method which simply emptied the variable which stores the entropy values to prepare it for the next epoch.</p>
</section>
<section id="more-on-implementation-choices">
<h2>More on implementation choices<a class="headerlink" href="#more-on-implementation-choices" title="Link to this heading"></a></h2>
<p>It should be noted that a lot of our decisions came from a top-down perspective. Many of our classes have design choices to accomendate the wrappers which handle the initialization and dataflow of the different metrics, dataloaders, and models.
All in all, we’ve made sure you don’t really need to interact with the code outside setting up the correct arguments for the run, which is great for consistency.</p>
</section>
<section id="challenges">
<h2>Challenges<a class="headerlink" href="#challenges" title="Link to this heading"></a></h2>
<section id="running-someone-elses-code">
<h3>Running someone elses code<a class="headerlink" href="#running-someone-elses-code" title="Link to this heading"></a></h3>
<p>This section answers the question on what I found easy / difficult running another persons code.</p>
<p>I found it quite easy to run others code. We had quite good tests, and once every test passed, I only had one error with the F1 score not handeling an unexpected edgecase. To fix this I raised an issue, and it was fixed shortly after.</p>
<p>One thing I did find a bit difficult was when people would change integral parts of the common code such as wrappers or loader functions (usually for the better), but did not raise an issue or notify about the change. It did cause some moments of questions, but in the end we sorted it out through weekly meetings where we agreed on design choices and how to handle loading of the different modules.</p>
<p>The issues mentioned above also lead to a week or so where there was always a test failing, and the person whos’ code was failing did not have time to work on it for a few days.</p>
</section>
<section id="someone-running-my-code">
<h3>Someone running my code<a class="headerlink" href="#someone-running-my-code" title="Link to this heading"></a></h3>
<p>This section answers the question on what I found easy / difficult having someone run my code.</p>
<p>I did not experience that anyone had issues with my code. After I fixed all issues and tests related to my code, it seems to have run fine, and no issues have been raised to my awareness about this.</p>
</section>
</section>
<section id="tools">
<h2>Tools<a class="headerlink" href="#tools" title="Link to this heading"></a></h2>
<p>This section answers the question of which tools from the course I used during the home-exam.</p>
<p>For this exam I used quite a few tools from the course.
I’ve never used pytest and test functions while writing code. This was quite fun to learn how to use, and having github actions also run the same tests was a great addition.</p>
<p>Github actions we used for quite a few things. We checked for code formatting, documentation generation and run the code tests.</p>
<p>Using sphinx for documentation was also a great tool. Turns out it’s possible to write the doc-string in such a way that it automatically generates the documentation for you. This has helped reduce the workload with documentation a lot, and makes writing proper docstrings worthwile.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="about.html" class="btn btn-neutral float-left" title="About this code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Jan_page.html" class="btn btn-neutral float-right" title="Jan Individual Task" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, SFI Visual Intelligence.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>